# Debt Relief Lead Gen Funnel - Cursor Rules
# Theme: LLM (Forbes Lead Gen)
# Framework: Next.js 14 + React 18 + TypeScript + Tailwind CSS

## Project Context

You are building a Forbes Advisor debt relief lead generation funnel. This is a 10-screen wizard flow that collects user information to match them with debt relief partners.

**Design Source**: Figma file `1sqO0lh2jxFWhGuglu87Bb` using LLM theme tokens
**Full Token Reference**: See `.cursor/llms.txt` for complete design specifications

---

## Tech Stack

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript (strict mode)
- **Styling**: Tailwind CSS with custom theme tokens
- **UI Primitives**: Radix UI (@radix-ui/react-*)
- **Forms**: react-hook-form + zod
- **Icons**: lucide-react

---

## Design Tokens (Memorize These)

### Colors
```
Primary Blue:     #007AC8  (buttons, links, active states)
Primary Hover:    #1E72A8  (hover state)
Primary Active:   #0B5F95  (pressed/active)
Primary Light:    #ECF1FF  (light backgrounds, selected cards)
Focus Ring:       #80CAF4  (focus outlines)

Neutrals:
  Black:          #000000  (headings)
  Charcoal:       #333333  (body text)
  Medium Grey:    #6A6A6A  (secondary text, placeholders)
  Light Neutral:  #F3F5FB  (hover backgrounds)
  Divider:        #EDEDED  (borders, separators)
  White:          #FFFFFF  (backgrounds)

Feedback:
  Error:          #EB4015
  Warning:        #FFB136
  Success:        #0C7663
```

### Tailwind Class Mappings
```
text-primary-700      → #007AC8
bg-primary-700        → #007AC8
hover:bg-primary-750  → #1E72A8
active:bg-primary-800 → #0B5F95
bg-primary-300        → #ECF1FF
ring-focus            → #80CAF4

text-neutral-900      → #000000 (headings)
text-neutral-800      → #333333 (body)
text-neutral-500      → #6A6A6A (secondary)
bg-neutral-100        → #F3F5FB
border-neutral-200    → #EDEDED

text-feedback-error   → #EB4015
text-feedback-success → #0C7663
```

### Spacing (8px grid)
```
xs: 4px    sm: 8px    md: 16px    lg: 24px    xl: 32px    2xl: 48px
```

### Sizing
```
Button height:    48px  → min-h-[48px]
Input height:     48px  → min-h-[48px]
Border radius:    8px   → rounded-[8px]
Card radius:      12px  → rounded-lg
```

---

## Layout System

### Content Well
- Use a centered content well with `max-w-content` (640px) or `max-w-xl`
- Always center with `mx-auto`
- Horizontal padding: `px-4` on mobile, `sm:px-6` on tablet+

### Breakpoints
- **Mobile**: `< 640px` (full width with padding)
- **Tablet**: `640px - 1024px` (centered 640px well)
- **Desktop**: `> 1024px` (centered 640px well)

---

## Component Library

### Available UI Components (use these, don't recreate)

```typescript
// Buttons
import { Button } from '@/components/ui'
<Button variant="primary" fullWidth>Continue</Button>
<Button variant="secondary">Back</Button>
<Button variant="ghost">Learn more</Button>

// Inputs
import { Input } from '@/components/ui'
<Input label="Email" placeholder="you@example.com" error={errors.email?.message} />

// Select Dropdowns
import { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from '@/components/ui'
<Select value={state} onValueChange={setState}>
  <SelectTrigger><SelectValue placeholder="Select state" /></SelectTrigger>
  <SelectContent>
    <SelectItem value="CA">California</SelectItem>
  </SelectContent>
</Select>

// Radio Cards (for debt type selection)
import { RadioGroup, RadioCard } from '@/components/ui'
<RadioGroup value={debtType} onValueChange={setDebtType}>
  <RadioCard value="credit-card">Credit card</RadioCard>
  <RadioCard value="loan">Loan</RadioCard>
  <RadioCard value="both">Both</RadioCard>
</RadioGroup>

// Sliders (for debt amount, income)
import { Slider } from '@/components/ui'
<Slider
  min={10000} max={60000} step={1000}
  value={[amount]} onValueChange={([v]) => setAmount(v)}
  formatValue={(v) => `$${v.toLocaleString()}`}
  markers={[{ value: 10000, label: '10K' }, { value: 60000, label: '60K+' }]}
/>

// Checkboxes (for consent)
import { Checkbox } from '@/components/ui'
<Checkbox checked={agreed} onCheckedChange={setAgreed} label={<>I agree to the <a href="#">Terms</a></>} />
```

### Layout Components

```typescript
// Standard screen wrapper - USE FOR ALL SCREENS
import { FormLayout } from '@/components/layout'

<FormLayout
  currentStep={1}        // 1 = debt profile, 2 = details, 3 = reduce debt
  onBack={handleBack}    // Back navigation handler
  showProgress={true}    // Show progress indicator
  sideContent={<Calculator />}  // Optional right column content
>
  {/* Form content */}
</FormLayout>
```

---

## Screen Implementation Pattern

Every screen follows this structure:

```typescript
'use client'

import * as React from 'react'
import { FormLayout } from '@/components/layout'
import { Button, Input } from '@/components/ui'

interface ScreenNameProps {
  initialValue?: string
  onBack?: () => void
  onSubmit?: (data: FormData) => void
}

export function ScreenName({ initialValue = '', onBack, onSubmit }: ScreenNameProps) {
  const [value, setValue] = React.useState(initialValue)
  
  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    onSubmit?.(value)
  }
  
  return (
    <FormLayout currentStep={1} onBack={onBack}>
      <form onSubmit={handleSubmit} className="animate-slide-up">
        {/* Headline */}
        <h1 className="text-headline-lg text-neutral-900 mb-2">
          Screen headline here
        </h1>
        <p className="text-body text-neutral-500 mb-8">
          Supporting description text
        </p>
        
        {/* Form Fields */}
        <div className="space-y-4 mb-8">
          {/* ... inputs ... */}
        </div>
        
        {/* Submit Button */}
        <Button type="submit" fullWidth>
          Continue
        </Button>
      </form>
    </FormLayout>
  )
}

export default ScreenName
```

---

## Journey Screens Specification

### Screen 1: LocationScreen
- **Step**: 1 (Your debt profile)
- **Headline**: "See if You Qualify for Loan Free Debt Relief"
- **Description**: "Have more than 15K in credit card and loan debt? You can reduce what you owe and lower your payments by as much as 50%"
- **Fields**: State dropdown (use US_STATES from types/funnel.ts)
- **Side Content**: US map visualization, stats ($5K avg debt, $4K avg savings)
- **CTA**: "Continue"

### Screen 2: DebtTypeScreen
- **Step**: 1
- **Headline**: "Tell us which kinds of these debts you have"
- **Fields**: RadioGroup with 3 RadioCards (Credit card, Loan, Both)
- **Info Section**: "Got mortgage, auto or student loan debts?" with "How it works" expandable
- **CTA**: Auto-advance on selection (no button needed)

### Screen 3: DebtAmountScreen ✅ IMPLEMENTED
- **Step**: 1
- **Headline**: "How much debt do you have?"
- **Subhead**: "You could reduce your debt amount by 50%"
- **Fields**: Slider ($10K - $60K+)
- **Side Content**: SavingsPreview with donut chart showing debt breakdown
- **CTA**: "Tell Us About Your Income"

### Screen 4: IncomeScreen
- **Step**: 1
- **Headline**: "What is your annual income?"
- **Description**: "Please share your total income before taxes."
- **Fields**: Slider ($10K/year - $200K+)
- **Link**: "Why we ask for this information?" (expandable accordion)
- **Side Content**: Updated savings projection based on debt-to-income
- **CTA**: "Give Us Your Details"

### Screen 5: DateOfBirthScreen
- **Step**: 2 (Your details)
- **Headline**: "Your date of birth"
- **Description**: "Your birth date helps providers tailor offers that fit your financial situation and eligibility."
- **Fields**: 3 Select dropdowns in a row (Month, Date, Year)
- **Validation**: Must be 18+ years old
- **CTA**: "Continue"

### Screen 6: NameScreen
- **Step**: 2
- **Headline**: "Your name"
- **Description**: "Using your exact first and last name helps verify your identity and create your debt profile, so we can quickly personalize your best debt relief options"
- **Fields**: First Name input, Last Name input (side by side on desktop, stacked on mobile)
- **Validation**: Min 2 chars each, letters only
- **CTA**: "Continue"

### Screen 7: DebtProfileScreen (Results)
- **Step**: 2
- **Headline**: "Here's your debt profile, {firstName}"
- **Subhead**: "Your debt profile matches with more than 200,000 people across the USA who are in 38-48 years age range"
- **Content**: 
  - Donut chart showing debt vs reduction
  - Stats: Your debt, Potential debt reduction ($2K-$4K)
  - Timeline: "24-48 Months" with visual indicator
  - Social proof: "Our partners have helped more than 3 million people"
  - Monthly payment: "You could be paying a single bill as low as $300/per month"
- **CTA**: "Continue To See Your Options"

### Screen 8: EmailScreen
- **Step**: 3 (Reduce your debt)
- **Headline**: "What's your email?"
- **Description**: "Please share your email so we know where to send your debt relief plan"
- **Fields**: Email input with validation
- **CTA**: "Continue"

### Screen 9: PhoneScreen
- **Step**: 3
- **Headline**: "Confirm Your phone number"
- **Description**: "Enter your phone number to confirm your identity and move one step closer to finding the right debt relief option. We'll text a one-time code to verify."
- **Fields**: Phone input (formatted as (###) ###-####)
- **Legal Consent**: Long text about Spinwheel agreement, marketing consent, privacy statement
- **CTA**: "Agree & Continue"

### Screen 10: AddressScreen
- **Step**: 3
- **Headline**: "Your Address"
- **Description**: "Your address helps us find the best debt relief options where you live, including protections and benefits."
- **Fields**: 
  - Address line 1 (required)
  - Address line 2 (optional)
  - Zip code (required, 5 digits)
- **CTA**: "See Your Options"

---

## Validation Patterns

```typescript
// Use zod for schema validation
import { z } from 'zod'

const nameSchema = z.object({
  firstName: z.string().min(2, 'First name must be at least 2 characters').regex(/^[a-zA-Z]+$/, 'Letters only'),
  lastName: z.string().min(2, 'Last name must be at least 2 characters').regex(/^[a-zA-Z]+$/, 'Letters only'),
})

const emailSchema = z.object({
  email: z.string().email('Please enter a valid email'),
})

const phoneSchema = z.object({
  phone: z.string().regex(/^\(\d{3}\) \d{3}-\d{4}$/, 'Please enter a valid phone number'),
  consent: z.boolean().refine(val => val === true, 'You must agree to continue'),
})

const addressSchema = z.object({
  line1: z.string().min(5, 'Please enter your street address'),
  line2: z.string().optional(),
  zipCode: z.string().regex(/^\d{5}$/, 'Please enter a valid 5-digit zip code'),
})

// Age validation (must be 18+)
const dobSchema = z.object({
  month: z.string().min(1, 'Required'),
  day: z.string().min(1, 'Required'),
  year: z.string().min(1, 'Required'),
}).refine(data => {
  const birthDate = new Date(`${data.year}-${data.month}-${data.day}`)
  const age = Math.floor((Date.now() - birthDate.getTime()) / 31557600000)
  return age >= 18
}, 'You must be at least 18 years old')

// Use with react-hook-form
import { zodResolver } from '@hookform/resolvers/zod'
import { useForm } from 'react-hook-form'

const { register, handleSubmit, formState: { errors } } = useForm({
  resolver: zodResolver(nameSchema),
})
```

---

## Styling Patterns

### Form Field Layouts

```typescript
// Single field
<div className="mb-8">
  <Input label="Email" {...register('email')} error={errors.email?.message} />
</div>

// Two fields side by side (responsive)
<div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
  <Input label="First Name" {...register('firstName')} />
  <Input label="Last Name" {...register('lastName')} />
</div>

// Three dropdowns in a row (DOB)
<div className="grid grid-cols-3 gap-4 mb-8">
  <Select><SelectTrigger>Month</SelectTrigger>...</Select>
  <Select><SelectTrigger>Day</SelectTrigger>...</Select>
  <Select><SelectTrigger>Year</SelectTrigger>...</Select>
</div>
```

### Card Containers

```typescript
// Highlighted section (like debt amount display)
<div className="bg-primary-300 rounded-lg p-6 mb-8">
  {/* content */}
</div>

// White card with border
<div className="bg-white border border-neutral-200 rounded-lg p-6 shadow-card">
  {/* content */}
</div>
```

### Text Patterns

```typescript
// Screen headline
<h1 className="text-headline-lg text-neutral-900 mb-2">Headline</h1>

// Screen description
<p className="text-body text-neutral-500 mb-8">Description</p>

// Section heading
<h2 className="text-headline-md text-neutral-900 mb-4">Section</h2>

// Body text
<p className="text-body text-neutral-800">Regular text</p>

// Secondary/helper text
<p className="text-body-sm text-neutral-500">Helper text</p>

// Legal/disclaimer text
<p className="text-caption text-neutral-500">*Disclaimer text</p>
```

---

## File Structure

```
src/
├── app/
│   ├── layout.tsx              # Root layout (DON'T MODIFY)
│   └── page.tsx                # Main funnel orchestrator
├── components/
│   ├── ui/                     # Base components (DON'T MODIFY unless adding new)
│   │   ├── Button.tsx
│   │   ├── Input.tsx
│   │   ├── Select.tsx
│   │   ├── RadioCard.tsx
│   │   ├── Slider.tsx
│   │   ├── Checkbox.tsx
│   │   └── index.ts
│   ├── layout/                 # Layout components (DON'T MODIFY)
│   │   ├── Header.tsx
│   │   ├── TrustBadges.tsx
│   │   ├── ProgressIndicator.tsx
│   │   ├── FormLayout.tsx
│   │   └── index.ts
│   └── screens/                # ← ADD NEW SCREENS HERE
│       ├── DebtAmountScreen.tsx ✅
│       ├── LocationScreen.tsx
│       ├── DebtTypeScreen.tsx
│       ├── IncomeScreen.tsx
│       ├── DateOfBirthScreen.tsx
│       ├── NameScreen.tsx
│       ├── DebtProfileScreen.tsx
│       ├── EmailScreen.tsx
│       ├── PhoneScreen.tsx
│       └── AddressScreen.tsx
├── lib/
│   └── utils.ts                # Utilities (cn, formatCurrency, calculateSavings)
├── types/
│   └── funnel.ts               # FunnelData type, US_STATES, validation constants
└── styles/
    └── globals.css             # Global styles + CSS variables
```

---

## Common Patterns

### Phone Number Formatting
```typescript
import { formatPhoneNumber } from '@/lib/utils'

const handlePhoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const formatted = formatPhoneNumber(e.target.value)
  setValue('phone', formatted)
}
```

### Currency Formatting
```typescript
import { formatCurrency } from '@/lib/utils'

formatCurrency(20000) // → "$20,000"
```

### Savings Calculation
```typescript
import { calculateSavings } from '@/lib/utils'

const { newDebtAmount, savings, monthlyPayment } = calculateSavings(debtAmount)
```

---

## Don'ts

- ❌ Don't use colors outside the defined palette
- ❌ Don't skip the FormLayout wrapper
- ❌ Don't create new UI primitives (use existing ones)
- ❌ Don't use arbitrary Tailwind values (`w-[347px]`, `p-[13px]`)
- ❌ Don't remove trust badges or Forbes branding
- ❌ Don't use inline styles
- ❌ Don't forget `'use client'` for interactive components
- ❌ Don't hardcode user data that should come from props/state
- ❌ Don't use `any` type - always define proper TypeScript types
- ❌ Don't skip form validation

---

## Example Prompts for Building Screens

```
Create the NameScreen component following the pattern in .cursorrules.
Use Input components for first and last name fields. Include validation
with react-hook-form and zod (min 2 chars, letters only). Desktop shows
fields side by side, mobile stacks them.
```

```
Build the DebtTypeScreen with RadioGroup and RadioCard components. 
Use icons from lucide-react (CreditCard, Banknote, Layers). The screen
should auto-advance when user selects an option - no submit button needed.
Include an expandable "How it works" section below the options.
```

```
Implement the PhoneScreen with formatted phone input and legal consent.
Format phone as (###) ###-#### while typing. Include the full legal 
consent text as a Checkbox label with links. Use the Checkbox component.
```

```
Create the DebtProfileScreen results page. Show a donut chart visualization
of debt breakdown, savings projection stats, timeline indicator, and social
proof statistics. Use the pattern from DebtAmountScreen's SavingsPreview 
but expanded to a full page layout.
```
